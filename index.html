<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Posts</title>
    <style>
        #instagram-posts {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .post {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            max-width: 300px;
            max-height: 500px;
            overflow: scroll;
        }
        .post img, .post video {
            width: 100%;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Instagram Posts</h1>
    <div id="instagram-posts"></div>

    <script>
        const accessToken = 'IGQWRPbWJzS0lETFpkUko5WGJTUkFEMTVLRS1GVmVFU0VNaWFiOUt4VDBIQnEwTEtWRVdvWmo4RGlFSW1XVEQzT2lMc0xZAc19vanJDbWpBZA0h3c08wek44VThBRnQwQjhZAR1g2U3NEc01sbmdndG52S1ZABRWExQzgZD'; // Ganti dengan access token kamu

        fetch(`https://graph.instagram.com/me/media?fields=id,caption,media_type,media_url,thumbnail_url,permalink&access_token=${accessToken}`)
            .then(response => {
                console.log('Response object:', response); // Tambahkan ini untuk melihat detail respons
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log('Parsed data:', data); // Debug respons API
                if (!data || !data.data) {
                    console.error('No data returned from API');
                    return;
                }

                const postsContainer = document.getElementById('instagram-posts');
                // Ambil hanya 5 postingan terakhir
                const latestPosts = data.data.slice(0, 5);

                latestPosts.forEach(post => {
                    const postElement = document.createElement('div');
                    postElement.className = 'post';

                    if (post.media_type === 'IMAGE' || post.media_type === 'CAROUSEL_ALBUM') {
                        // Jika media adalah gambar
                        postElement.innerHTML = `
                            <a href="${post.permalink}" target="_blank">
                                <img src="${post.media_url}" alt="${post.caption}" />
                            </a>
                            <p>${post.caption ? post.caption : ''}</p>
                        `;
                    } else if (post.media_type === 'VIDEO') {
                        // Jika media adalah video
                        postElement.innerHTML = `
                            <a href="${post.permalink}" target="_blank">
                                <video controls>
                                    <source src="${post.media_url}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </a>
                            <p>${post.caption ? post.caption : ''}</p>
                        `;
                    }

                    postsContainer.appendChild(postElement);
                });
            })
            .catch(error => console.error('Error fetching Instagram posts:', error));
    </script>
</body>
</html>
